{"version":3,"file":"default-src_app_pages_boleto-details_boleto-details_page_ts.js","mappings":"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","sources":["./src/app/pages/boleto-details/boleto-details.page.ts","./src/app/services/boleto.service.ts","./src/app/pages/boleto-details/boleto-details.page.html"],"sourcesContent":["import { Component, Input, OnInit } from '@angular/core';\r\nimport { ModalController } from '@ionic/angular';\r\nimport { Boleto } from 'src/app/model/Boleto';\r\nimport { Premio } from 'src/app/model/Premio';\r\nimport { BoletoService } from 'src/app/services/boleto.service';\r\nimport { LoadingService } from 'src/app/services/loading.service';\r\nimport { PremioService } from 'src/app/services/premio.service';\r\nimport { ToastService } from 'src/app/services/toast.service';\r\n\r\n@Component({\r\n  selector: 'app-boleto-details',\r\n  templateUrl: './boleto-details.page.html',\r\n  styleUrls: ['./boleto-details.page.scss'],\r\n})\r\nexport class BoletoDetailsPage implements OnInit {\r\n  @Input() boleto: Boleto;\r\n  constructor(\r\n    private modalController: ModalController,\r\n    private premioService: PremioService,\r\n    private boletoService: BoletoService,\r\n    private toastService: ToastService,\r\n    private loading: LoadingService\r\n  ) {}\r\n\r\n  ngOnInit() {}\r\n\r\n  entregar() {}\r\n  /**\r\n   * Cierra el modal\r\n   */\r\n  public cerrar() {\r\n    this.modalController.dismiss();\r\n  }\r\n\r\n  public get isValid(): boolean {\r\n    return this.boleto.premio === null\r\n      ? this.boleto.canjeado\r\n      : this.boleto.canjeado && this.boleto.premio?.entregado;\r\n  }\r\n\r\n  //hay que actualizar los boletos y premios desde premio.\r\n\r\n  public async updateBoleto(boleto: Boleto) {\r\n    await this.boletoService\r\n      .putBoleto(boleto)\r\n      .then(() => {\r\n        this.toastService.showToast('Marcado como entregado', 'tertiary');\r\n      })\r\n      .catch(() => {\r\n        this.toastService.showToast('Error al marcar como entregado', 'danger');\r\n      });\r\n  }\r\n\r\n  public async updateBoletoAndBindPremio(premio: Premio) {\r\n    await this.premioService\r\n      .updatePremio(premio)\r\n      .then(async (premio) => {\r\n        let boleto = premio.boleto;\r\n        boleto.premio = {\r\n          id: premio.id,\r\n          description: premio.description,\r\n          entregado: premio.entregado,\r\n        };\r\n        await this.updateBoleto(boleto);\r\n      })\r\n      .catch(() => {\r\n        this.toastService.showToast('Error al marcar como entregado', 'danger');\r\n      });\r\n  }\r\n\r\n  public async getPremioById(id: Number): Promise<Premio | null> {\r\n    let response: Premio | null = null;\r\n    await this.premioService.getPremio(id).then((premio) => {\r\n      response = premio;\r\n    });\r\n    return response;\r\n  }\r\n\r\n  public async getBoletoById(id: Number): Promise<Boleto | null> {\r\n    let response: Boleto | null = null;\r\n    await this.boletoService\r\n      .getBoleto(id)\r\n      .then((boleto) => {\r\n        response = boleto;\r\n      })\r\n      .catch(() => {});\r\n    return response;\r\n  }\r\n\r\n  public async refreshBoleto(boleto: Boleto) {\r\n    let response: Boleto;\r\n    await this.getBoletoById(boleto.id).then((boleto) => {\r\n      response = boleto;\r\n    });\r\n    if (response) this.boleto = response;\r\n  }\r\n\r\n  public async setCanjeadosToTrue() {\r\n    //comprobar si boleto tiene premio\r\n    this.loading.showLoading();\r\n    if (this.boleto.premio === null) {\r\n      this.boleto.canjeado = true;\r\n      this.boleto.entregado = true;\r\n      await this.updateBoleto(this.boleto);\r\n    } else {\r\n      let premio: Premio;\r\n      await this.getPremioById(this.boleto.premio.id).then(\r\n        (response) => (premio = response)\r\n      );\r\n      if (premio != null) {\r\n        premio.entregado = true;\r\n        premio.boleto.canjeado = true;\r\n        premio.boleto.entregado = true;\r\n        await this.updateBoletoAndBindPremio(premio);\r\n      } else {\r\n        this.toastService.showToast('Error al marcar como entregado', 'danger');\r\n      }\r\n    }\r\n    await this.refreshBoleto(this.boleto);\r\n    this.loading.hideLoading();\r\n    console.log(this.boleto);\r\n  }\r\n}\r\n","import { HttpClient, HttpHeaders } from '@angular/common/http';\r\nimport { Injectable, SkipSelf } from '@angular/core';\r\nimport { environment } from 'src/environments/environment';\r\nimport { Boleto } from '../model/Boleto';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class BoletoService {\r\n\r\n  apiEndpoint = environment.apiEnviroment.endpoint + environment.apiEnviroment.apiBoletos + \"/\";\r\n  public iv: Buffer;\r\n\r\n\r\n  constructor(private http: HttpClient) { }\r\n\r\n  public async getBoletos(id_boleto?: Number): Promise<Boleto[]> {\r\n    return new Promise(async (resolve, reject) => {\r\n      let endpoint = this.apiEndpoint;\r\n      let boleto: Boleto[];\r\n      if (id_boleto) {\r\n        endpoint += id_boleto;\r\n      }\r\n      try {\r\n        boleto = await this.http.get(endpoint).toPromise() as Boleto[];\r\n        resolve(boleto);\r\n      } catch (error) {\r\n        reject(error);\r\n      }\r\n    });\r\n  }\r\n\r\n  public async getBoleto(id_boleto: Number): Promise<Boleto> {\r\n    return new Promise(async (resolve, reject) => {\r\n      let endpoint = this.apiEndpoint + id_boleto;\r\n      let boleto: Boleto;\r\n\r\n      try {\r\n        boleto = await this.http.get(endpoint).toPromise() as Boleto;\r\n        resolve(boleto);\r\n      } catch (error) {\r\n        reject(error);\r\n      }\r\n    });\r\n  }\r\n\r\n  public async getBoletosEntregados(): Promise<Boleto[]> {\r\n    return new Promise(async (resolve, reject) => {\r\n      let endpoint = this.apiEndpoint + environment.apiEnviroment.apiBoletosEntregados;\r\n      let boletos;\r\n      try {\r\n        boletos = await this.http.get(endpoint).toPromise();\r\n        resolve(boletos);\r\n      } catch (error) {\r\n        reject(error);\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n  public async getBoletosCanjeados(): Promise<Boleto[]> {\r\n    return new Promise(async (resolve, reject) => {\r\n      let endpoint = this.apiEndpoint + environment.apiEnviroment.apiBoletoscanjeados;\r\n      let boletos: Boleto[];\r\n      try {\r\n        boletos = await this.http.get(endpoint).toPromise() as Boleto[];\r\n        resolve(boletos);\r\n      } catch (error) {\r\n        reject(error);\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n  public async getBoletosByUsuario(id_usuario: Number): Promise<Boleto[]> {\r\n    return new Promise(async (resolve, reject) => {\r\n      if (id_usuario && id_usuario > -1) {\r\n        let endpoint = this.apiEndpoint + id_usuario;\r\n        let boletos: Boleto[];\r\n        try {\r\n          boletos = await this.http.get(endpoint).toPromise() as Boleto[];\r\n          resolve(boletos);\r\n        } catch (error) {\r\n          reject(error);\r\n        }\r\n      } else {\r\n        reject();\r\n      }\r\n    });\r\n  }\r\n\r\n  public async getBoletoSorteo(id_usuario: Number): Promise<Boleto[]> {\r\n    return new Promise(async (resolve, reject) => {\r\n      if (id_usuario && id_usuario > -1) {\r\n        let endpoint = this.apiEndpoint + environment.apiEnviroment.apiBoletosSorteo + \"/\" + id_usuario;\r\n        let boletos: Boleto[];\r\n        try {\r\n          boletos = await this.http.get(endpoint).toPromise() as Boleto[];\r\n          resolve(boletos);\r\n        } catch (error) {\r\n          reject(error);\r\n        }\r\n      } else {\r\n        reject(\"id_usuario mal introducido\");\r\n      }\r\n    });\r\n  }\r\n\r\n  public async postBoleto(newBoleto: Boleto): Promise<Boleto> {\r\n    return new Promise(async (resolve, reject) => {\r\n      let endpoint = this.apiEndpoint;\r\n     // let boletos: Boleto[];\r\n      try {\r\n       let boleto:any= await this.http.post(endpoint, newBoleto).toPromise() as Boleto[];\r\n        resolve(boleto);\r\n      } catch (error) {\r\n        reject(error);\r\n      }\r\n    });\r\n  }\r\n\r\n  public async putBoleto(newBoleto: Boleto): Promise<Boleto> {\r\n    return new Promise(async (resolve, reject) => {\r\n      let endpoint = this.apiEndpoint;\r\n      let boletos: Boleto;\r\n      try {\r\n        boletos = await this.http.put(endpoint, newBoleto).toPromise() as Boleto;\r\n        resolve(boletos);\r\n      } catch (error) {\r\n        reject(error);\r\n      }\r\n    });\r\n  }\r\n\r\n  public async deleteBoleto(id_boleto: Number): Promise<boolean> {\r\n    return new Promise(async (resolve, reject) => {\r\n      if (id_boleto && id_boleto > -1) {\r\n        let endpoint = this.apiEndpoint + id_boleto;\r\n        try {\r\n          await this.http.delete(endpoint).toPromise();\r\n          resolve(true);\r\n        } catch (error) {\r\n          reject(false);\r\n        }\r\n      } else {\r\n        reject(false);\r\n      }\r\n    });\r\n  }\r\n}\r\n","export default \"<ion-header>\\r\\n  <ion-toolbar color=\\\"warning\\\" class=\\\"header\\\">\\r\\n    <ion-title>Crear Boletos</ion-title>\\r\\n    <ion-buttons slot=\\\"end\\\">\\r\\n      <ion-icon\\r\\n        name=\\\"close-circle\\\"\\r\\n        style=\\\"zoom: 2\\\"\\r\\n        (click)=\\\"cerrar()\\\"\\r\\n      ></ion-icon>\\r\\n    </ion-buttons>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-icon name=\\\"arrow-back-outline\\\"></ion-icon>\\r\\n    </ion-buttons>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n  <div class=\\\"home\\\">\\r\\n    <form>\\r\\n      <ion-label>Descripción:</ion-label>\\r\\n      <ion-item class=\\\"input\\\">\\r\\n        <ion-label>{{this.boleto.descripcion}}</ion-label>\\r\\n      </ion-item>\\r\\n\\r\\n      <ion-label>Comercio:</ion-label>\\r\\n      <ion-item class=\\\"input\\\">\\r\\n        <ion-label>{{this.boleto.usuario.nombre_comercio}}</ion-label>\\r\\n      </ion-item>\\r\\n\\r\\n      <div *ngIf=\\\"this.boleto.premio; else notPremiado\\\">\\r\\n        <ion-label>Canjeado:</ion-label>\\r\\n        <ion-item class=\\\"input\\\">\\r\\n          <ion-label>{{this.boleto.premio.entregado}}</ion-label>\\r\\n        </ion-item>\\r\\n\\r\\n        <ion-label>Premio:</ion-label>\\r\\n        <ion-item class=\\\"input\\\">\\r\\n          <ion-label>{{this.boleto.premio.description}}</ion-label>\\r\\n        </ion-item>\\r\\n      </div>\\r\\n\\r\\n      <ng-template #notPremiado>\\r\\n        <ion-label>Canjeado:</ion-label>\\r\\n        <ion-item class=\\\"input\\\">\\r\\n          <ion-label>ESTE BOLETO NO TIENE PREMIO</ion-label>\\r\\n        </ion-item>\\r\\n\\r\\n        <ion-label>Premio:</ion-label>\\r\\n        <ion-item class=\\\"input\\\">\\r\\n          <ion-label>ESTE BOLETO NO TIENE PREMIO</ion-label>\\r\\n        </ion-item>\\r\\n      </ng-template>\\r\\n\\r\\n      <ion-button\\r\\n        expand=\\\"full\\\"\\r\\n        color=\\\"tertiary\\\"\\r\\n        type=\\\"submit\\\"\\r\\n        (click)=\\\"setCanjeadosToTrue()\\\"\\r\\n        [disabled]=\\\"isValid\\\"\\r\\n        >MARCAR COMO ENTREGADO</ion-button\\r\\n      >\\r\\n    </form>\\r\\n  </div>\\r\\n</ion-content>\\r\\n\";"],"names":[],"sourceRoot":"webpack:///"}