{"version":3,"file":"src_app_tab2_tab2_module_ts.js","mappings":"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","sources":["./src/app/tab2/tab2-routing.module.ts","./src/app/tab2/tab2.module.ts","./src/app/tab2/tab2.page.ts","./src/app/tab2/tab2.page.html"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { Tab2Page } from './tab2.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: Tab2Page,\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class Tab2PageRoutingModule {}\n","import { IonicModule } from '@ionic/angular';\r\nimport { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { Tab2Page } from './tab2.page';\r\nimport { ExploreContainerComponentModule } from '../explore-container/explore-container.module';\r\n\r\nimport { Tab2PageRoutingModule } from './tab2-routing.module';\r\n\r\n@NgModule({\r\n  imports: [\r\n    IonicModule,\r\n    CommonModule,\r\n    FormsModule,\r\n    ExploreContainerComponentModule,\r\n    Tab2PageRoutingModule\r\n  ],\r\n  declarations: [Tab2Page]\r\n})\r\nexport class Tab2PageModule {}\r\n","import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { Usuario } from '../model/Usuario';\r\nimport { Premio } from '../model/Premio';\r\nimport { PremioService } from '../services/premio.service';\r\nimport { ToastService } from '../services/toast.service';\r\nimport { UsuariosService } from '../services/usuarios.service';\r\nimport {\r\n  AlertController,\r\n  IonInfiniteScroll,\r\n  LoadingController,\r\n  ModalController,\r\n} from '@ionic/angular';\r\nimport { CreatePremioPage } from '../pages/create-premio/create-premio.page';\r\nimport { EditPremioPage } from '../pages/edit-premio/edit-premio.page';\r\nimport { LoadingService } from '../services/loading.service';\r\nimport { CrearBoletoPage } from '../pages/crear-boleto/crear-boleto.page';\r\n\r\n@Component({\r\n  selector: 'app-tab2',\r\n  templateUrl: 'tab2.page.html',\r\n  styleUrls: ['tab2.page.scss'],\r\n})\r\nexport class Tab2Page {\r\n  public listado: Array<Premio>;\r\n  public premios: Premio[] = [];\r\n  public premio: Premio;\r\n  constructor(\r\n    private usuarioService: UsuariosService,\r\n    public alertController: AlertController,\r\n    private api: PremioService,\r\n    private modalController: ModalController,\r\n    public miLoading: LoadingService,\r\n    public toast: ToastService\r\n  ) {}\r\n\r\n  ngOnInit() {}\r\n\r\n  async ionViewDidEnter() {\r\n    await this.miLoading.showLoading();\r\n    await this.getAllPremio();\r\n    await this.miLoading.hideLoading();\r\n  }\r\n\r\n  public async cargaPremios(event?) {\r\n    if (!event) {\r\n      await this.miLoading.showLoading();\r\n    }\r\n    this.premios = [];\r\n    try {\r\n      this.premios = await this.api.getAllPremios();\r\n    } catch (err) {\r\n      console.error(err);\r\n      await this.toast.showToast('Error cargando datos', 'danger');\r\n    } finally {\r\n      if (event) {\r\n        event.target.complete();\r\n      } else {\r\n        await this.miLoading.hideLoading();\r\n      }\r\n    }\r\n  }\r\n\r\n  public async getAllPremio() {\r\n    try {\r\n      this.premios = await this.api.getAllPremios();\r\n    } catch (error) {\r\n      this.listado = null;\r\n    }\r\n  }\r\n\r\n  public async deletePremio(premio: Premio) {\r\n    const alert = await this.alertController.create({\r\n      header: 'Confirmación',\r\n      message: 'Estas seguro de que quieres eliminar',\r\n      cssClass: 'my-css',\r\n      buttons: [\r\n        {\r\n          text: 'Cancelar',\r\n          cssClass: 'my-css',\r\n          handler: (blah) => {\r\n            //nada\r\n          },\r\n        },\r\n        {\r\n          text: 'Eliminar',\r\n          cssClass: 'my-css',\r\n          handler: async () => {\r\n            try {\r\n              await this.miLoading.showLoading();\r\n              await this.api.deletePremio(premio.id);\r\n              //Para recargar la lista\r\n              let i = this.premios.indexOf(premio, 0);\r\n              if (i > -1) {\r\n                this.premios.splice(i, 1);\r\n              }\r\n              await this.miLoading.hideLoading();\r\n              await this.toast.showToast(\r\n                'Premio borrado correctamente',\r\n                'tertiary'\r\n              );\r\n            } catch (error) {}\r\n          },\r\n        },\r\n      ],\r\n    });\r\n    await alert.present();\r\n  }\r\n\r\n  public async crear() {\r\n    const modal = await this.modalController.create({\r\n      component: CreatePremioPage,\r\n      cssClass: 'my-custom-class',\r\n      componentProps: {},\r\n    });\r\n    await modal.present();\r\n    await modal.onDidDismiss();\r\n    await this.getAllPremio();\r\n  }\r\n\r\n  public async editar(premio: Premio) {\r\n    const modal = await this.modalController.create({\r\n      component: EditPremioPage,\r\n      cssClass: 'my-custom-class',\r\n      componentProps: { premio },\r\n    });\r\n    await modal.present();\r\n    await this.getAllPremio();\r\n  }\r\n\r\n  /**\r\n   * Busca filtrando descripción\r\n   * @param $event\r\n   */\r\n  public async buscar($event) {\r\n    let premios: Premio[] = [];\r\n    const filtro: string = $event.detail.value;\r\n    if (filtro.length > 1) {\r\n      for (let premio of this.premios) {\r\n        if (premio.description.includes(filtro)) {\r\n          premios.push(premio);\r\n        }\r\n      }\r\n      this.premios = premios;\r\n    } else if (filtro.length == 0) {\r\n      await this.getAllPremio();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Pasar a la pag siguiente\r\n   *\r\n   */\r\n  public async siguiente() {\r\n    const modal = await this.modalController.create({\r\n      component: CrearBoletoPage,\r\n      cssClass: 'my-custom-class',\r\n      componentProps: {},\r\n    });\r\n    await modal.present();\r\n    await modal.onDidDismiss();\r\n  }\r\n}\r\n","export default \"<ion-header [translucent]=\\\"true\\\" class=\\\"header\\\">\\r\\n  <ion-toolbar color=\\\"warning\\\">\\r\\n    <ion-title> PREMIOS </ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content [fullscreen]=\\\"true\\\" class=\\\"content\\\">\\r\\n  <ion-searchbar\\r\\n    class=\\\"searchbar\\\"\\r\\n    color=\\\"dark\\\"\\r\\n    (ionChange)=\\\"buscar($event)\\\"\\r\\n    placeholder=\\\"Buscar...\\\"\\r\\n  ></ion-searchbar>\\r\\n\\r\\n  <ion-refresher slot=\\\"fixed\\\" (ionRefresh)=\\\"cargaPremios($event)\\\">\\r\\n    <ion-refresher-content></ion-refresher-content>\\r\\n  </ion-refresher>\\r\\n\\r\\n  <ion-list>\\r\\n    <h6>LISTA DE PREMIOS</h6>\\r\\n    <ion-card *ngFor=\\\"let premio of premios; let i=index\\\">\\r\\n      <div class=\\\"display\\\">\\r\\n        <ion-card-header>\\r\\n          <ion-card-title>Id: {{premio.id}}</ion-card-title>\\r\\n          <ion-card-subtitle\\r\\n            >Descripción: {{premio.description}}</ion-card-subtitle\\r\\n          >\\r\\n          <ion-card-subtitle>Entregado: {{premio.entregado}}</ion-card-subtitle>\\r\\n        </ion-card-header>\\r\\n\\r\\n        <ion-item>\\r\\n          <ion-button (click)=\\\"editar(premio)\\\">\\r\\n            <ion-icon name=\\\"pencil\\\"></ion-icon>\\r\\n          </ion-button>\\r\\n          <ion-button color=\\\"danger\\\" (click)=\\\"deletePremio(premio)\\\">\\r\\n            <ion-icon name=\\\"trash-bin\\\"></ion-icon>\\r\\n          </ion-button>\\r\\n        </ion-item>\\r\\n      </div>\\r\\n    </ion-card>\\r\\n  </ion-list>\\r\\n\\r\\n  <ion-fab vertical=\\\"bottom\\\" horizontal=\\\"end\\\" slot=\\\"fixed\\\">\\r\\n    <ion-fab-button color=\\\"tertiary\\\" (click)=\\\"crear()\\\">\\r\\n      <ion-icon name=\\\"add\\\"></ion-icon>\\r\\n    </ion-fab-button>\\r\\n  </ion-fab>\\r\\n</ion-content>\\r\\n\";"],"names":[],"sourceRoot":"webpack:///"}